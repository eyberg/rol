<html><head><link type='text/css' rel='stylesheet' media='screen' href='main.css'/></head><body><script>function flipit(id) { varel = document.getElementById(id); if(varel.style.display=='') { varel.style.display='none'; } else { varel.style.display = ''; }}</script><div class='header'><center><img src='reia.png'></center><div class='hlink'><a href="http://wiki.reia-lang.org/wiki/Reia_Programming_Language">Reia WebSite</a></div><div class='datetime'>Generated: (2009,3,24) (23,18,52)</div><div class='clearboth'></div></div><br> <div class='subheader' onclick="flipit('c7');"><b>Class:</b> class ODBC</div><br><div id="c7" class='codeblock' style='display: none;'> <br> #  <br> # ODBC: Reia ODBC interface <br> # Copyright (C)2008 Jared Kuolt <br> # <br> # Redistribution is permitted under the MIT license.  See LICENSE for details. <br> # <br> # This interface is subject to change!</div> <div class='subheader' onclick="flipit('d33');"><b>Method:</b>   def initialize(dsn)</div><br><div id="d33" class='codeblock' style='display: none;'> <br> class ODBC <br>   # Open a ODBC connection with DSN string <br>   # <br>   # Example: <br>   #   db = ODBC("DSN=mysqldb;UID=root")  <br>   #   db.select_count("SELECT * FROM fruit") # Returns number of rows <br>   # <br>   # You can access results from the cursor by using select_count <br>   # and the first, last, next and prev methods. Otherwise, the query <br>   # method may be simplest, though it loads all results into memory. <br>   # <br>   # Cursor: <br>   #   result = db.next() # Returns ODBCResult object <br>   # <br>   # All results: <br>   #   result = db.sql_query("SELECT * FROM fruit") # ODBCResult object <br>   #  <br>   # Using the hashes method on a ODBCResult object gives hash access <br>   # to each row returned. <br>   # <br>   #   result.hashes()[0]['color'] # Returns the "color" column of the  <br>   #                               # first row returned <br>   # <br>   # You can also access the size of the result: <br>   #   result.size() # Row count <br>   #</div> <div class='subheader' onclick="flipit('d42');"><b>Method:</b>   def select_count(q)</div><br><div id="d42" class='codeblock' style='display: none;'> <br>   def initialize(dsn) <br>     odbc::start() <br>     case odbc::connect(dsn.to_list(), []) <br>     when (~ok, ref) <br>       @ref = ref <br>     when (~error, reason) <br>       throw reason <br>     end <br>   end</div> <div class='subheader' onclick="flipit('d50');"><b>Method:</b>   def query(q)</div><br><div id="d50" class='codeblock' style='display: none;'> <br>   def select_count(q) <br>     case odbc::select_count(@ref, q.to_list()) <br>     when (~ok, nrows) <br>       nrows <br>     when (~error, reason) <br>       throw reason <br>     end <br>   end</div> <div class='subheader' onclick="flipit('d60');"><b>Method:</b>   def next</div><br><div id="d60" class='codeblock' style='display: none;'> <br>   def query(q) <br>     case odbc::sql_query(@ref, q.to_list()) <br>     when (~selected, colnames, rows) <br>       ODBCResult(colnames, rows)  <br>     when (~updated, nrows) <br>       nrows <br>     when (~error, reason) <br>       throw reason <br>     end <br>   end</div> <div class='subheader' onclick="flipit('d68');"><b>Method:</b>   def prev</div><br><div id="d68" class='codeblock' style='display: none;'> <br>   def next <br>     case odbc::next(@ref) <br>     when (~selected, colnames, rows) <br>       ODBCResult(colnames, rows) <br>     when (~error, reason) <br>       throw reason <br>     end <br>   end</div> <div class='subheader' onclick="flipit('d76');"><b>Method:</b>   def first</div><br><div id="d76" class='codeblock' style='display: none;'> <br>   def prev <br>     case odbc::prev(@ref) <br>     when (~selected, colnames, rows) <br>       ODBCResult(colnames, rows) <br>     when (~error, reason) <br>       throw reason <br>     end <br>   end</div> <div class='subheader' onclick="flipit('d85');"><b>Method:</b>   def last</div><br><div id="d85" class='codeblock' style='display: none;'> <br>   def first <br>     case odbc::first(@ref) <br>     when (~selected, colnames, rows) <br>       ODBCResult(colnames, rows) <br>     when (~error, reason) <br>       throw reason <br>     end <br>   end <br>   </div> <div class='subheader' onclick="flipit('d93');"><b>Method:</b>   def describe_table(table)</div><br><div id="d93" class='codeblock' style='display: none;'> <br>   def last <br>     case odbc::last(@ref) <br>     when (~selected, colnames, rows) <br>       ODBCResult(colnames, rows) <br>     when (~error, reason) <br>       throw reason <br>     end <br>   end</div> <div class='subheader' onclick="flipit('d102');"><b>Method:</b>   def close</div><br><div id="d102" class='codeblock' style='display: none;'> <br>   def describe_table(table) <br>     case odbc::describe_table(@ref, table.to_list()) <br>     when (~ok, description) <br>       description <br>     when (~error, reason) <br>       throw reason <br>     end <br>   end <br>   </div> <div class='subheader' onclick="flipit('c107');"><b>Class:</b> class ODBCResult</div><br><div id="c107" class='codeblock' style='display: none;'> <br>   def close <br>     odbc::disconnect(@ref) <br>     odbc::stop() <br>   end <br> end</div> <div class='subheader' onclick="flipit('d108');"><b>Method:</b>   def initialize(colnames, rows)</div><br><div id="d108" class='codeblock' style='display: none;'> <br> class ODBCResult</div> <div class='subheader' onclick="flipit('d120');"><b>Method:</b>   def hashes</div><br><div id="d120" class='codeblock' style='display: none;'> <br>   def initialize(colnames, rows) <br>     @columns = colnames.map{|m| m.to_string() } <br>     @rowdata = rows.map do |row| <br>       row.to_list().map do |c|  <br>         if erlang::is_list(c) <br>           c.to_string() <br>         else <br>           c <br>         end <br>       end <br>     end <br>   end</div> <div class='subheader' onclick="flipit('d128');"><b>Method:</b>   def rowdata</div><br><div id="d128" class='codeblock' style='display: none;'> <br>   def hashes <br>     if @hashes <br>       @hashes <br>     else <br>       range = (0..(@columns.size() - 1)) <br>       @hashes = @rowdata.map {|row| range.map{|i| (@columns[i], row[i])}.to_hash() } <br>     end <br>   end</div> <div class='subheader' onclick="flipit('d131');"><b>Method:</b>   def columns</div><br><div id="d131" class='codeblock' style='display: none;'> <br>   def rowdata <br>     @rowdata <br>   end</div> <div class='subheader' onclick="flipit('d134');"><b>Method:</b>   def size</div><br><div id="d134" class='codeblock' style='display: none;'> <br>   def columns <br>     @columns <br>   end</div>